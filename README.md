# PyQt-LLM RAG
Вторая итерация попыток в Qt, заодно и в llm. На волне хайпа вокруг новомодной deepseek возникла идея сделать ui обертку вокруг нее, а заодно памятуя пройденно недавно курс про RAG в llm появилась идея создания данного, вероятно в сущности не отличающегося новизной проекта. Зато, это был неплохой шанс снова поэксперементировать с разработкой ui. На текущий момент поддерживаются только gguf модели. Для использования надо положить файл в ./models/(answer - генерирующая итоговый ответ, embedding - для создания векторной базы данных).
Часть моделей можно конвертировать в gguf формат, например как указано [тут](https://github.com/ggerganov/llama.cpp/discussions/2948).

В качестве основных моделей использовались:
   - [Для генерации ответов](https://huggingface.co/ruslandev/llama-3-8b-gpt-4o-ru1.0-gguf) (Хотя изначально планировалось рассматривать именно deepseek, но эта неплохо справлялась ещё и с русским языком)
   - [Для эмбеддинга](https://huggingface.co/intfloat/multilingual-e5-large-instruct) (Необходимо сконвертировать в gguf)




## На текущий момент алгоритм действий достаточно простой:
    1. Выбирается текстовый файл, который разделяется на чанки при загрузке, согласно выставленным параметрам
    2. Загружается модель для эмбеддинга
    3. Обрабатывается уже разбитый файл (результат можно сохранить и загрузить, для чего необходимо выбрать соответствующую директорию)
    4. Выбрать модель для ответа, шаблон для промпта

Процесс генерации итогового ответа, равно как и процесс создания векторной базы можно при необходимости прерывать
Во время генерации к итоговому ответу дописываются токены по мере их поступления, так что область текста "динамически" расширяется
Также поддерживается вывод в виде markdown

![alt text](https://github.com/GlebVas1/pyqt-llm/blob/main/images/1.png?raw=true)
![alt text](https://github.com/GlebVas1/pyqt-llm/blob/main/images/2.png?raw=true)

На этот раз все (практически) сведено к главному QSS на основном виджете, что допускает в перспективе в реалтайме менять оформление. Уже наученный методом проб и ошибок с Qt при кастомизации отдельных элементов интерфейса, на мой взгляд, получилось более "элегантно", нежели в прошлом проекте, но это субъективщина.

# TODO:
    0. Добавить поддержку gpu
    1. Исправить шрифты с ломающимся скейлингом
    2. Добавить загрузку моделей, ибо hf_download надо обернуть для использования с ui
    3. Добавить локализацию интерфейса
    4. Увеличить количество доступных параметров
    5. Убрать часть костылей и провести рефакторинг
    6. Добавить поддержку моделей вне gguf формата
    7. Сделать более адекватные шаблоны для промпта
    8. Исправить некоторые косяки интерфейса
    9. Добавить пререквизиты
